(this["webpackJsonpredux-anecdotes"]=this["webpackJsonpredux-anecdotes"]||[]).push([[0],{51:function(t,e,n){"use strict";n.r(e);var r,c=n(0),a=n(8),o=n.n(a),u=n(3),i=n(6),s=n(21),d=n(22),f=n(2),p=n.n(f),j=n(5),v=n(11),l=n(23),b=n(7),O=n.n(b),h="/api/anecdotes",x={getAll:function(){var t=Object(j.a)(p.a.mark((function t(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.get(h);case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),createNew:function(){var t=Object(j.a)(p.a.mark((function t(e){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={content:e,votes:0},t.next=3,O.a.post(h,n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),update:function(){var t=Object(j.a)(p.a.mark((function t(e){var n,r,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("".concat(h,"/").concat(e));case 2:return n=t.sent,r={content:n.data.content,id:n.data.id,votes:n.data.votes+1},t.next=6,O.a.put("".concat(h,"/").concat(e),r);case 6:return c=t.sent,t.abrupt("return",c.data);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"NEW_ANECDOTE":return[].concat(Object(l.a)(t),[e.data]);case"INIT_ANECDOTES":return e.data;case"VOTE":var n=e.data.id,r=t.find((function(t){return t.id===n})),c=r.votes,a=Object(v.a)(Object(v.a)({},r),{},{votes:c+1});return t.map((function(t){return t.id!==n?t:a})).sort((function(t,e){return e.votes-t.votes}));default:return t}},y=function(t,e){return function(){var n=Object(j.a)(p.a.mark((function n(c){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c({type:"NEW_NOTIFICATION",data:{content:t}}),clearTimeout(r),r=setTimeout((function(){c({type:"REMOVE"})}),1e3*e);case 3:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"NEW_NOTIFICATION":return e.data.content;case"REMOVE":return t="";default:return t}},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_FILTER":return e.data.filter;default:return t}},T=Object(i.combineReducers)({anecdotes:w,notifications:E,filter:m}),g=Object(i.createStore)(T,Object(d.composeWithDevTools)(Object(i.applyMiddleware)(s.a))),N=n(1),k=Object(u.b)(null,{createAnecdote:function(t){return function(){var e=Object(j.a)(p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.createNew(t);case 2:r=e.sent,n({type:"NEW_ANECDOTE",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},newNotification:y})((function(t){var e=function(){var e=Object(j.a)(p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),r=n.target.anecdote.value,n.target.anecdote.value="",t.createAnecdote(r),t.newNotification("you created '".concat(r,"'"),3);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)("div",{children:[Object(N.jsx)("h2",{children:"create new"}),Object(N.jsxs)("form",{onSubmit:e,children:[Object(N.jsx)("input",{id:"create-anecdote",name:"anecdote"}),Object(N.jsx)("button",{id:"add-button",type:"submit",children:"add"})]})]})})),I=function(t){var e=t.anecdote,n=t.handleClick;return Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{children:e.content}),Object(N.jsxs)("div",{children:["has ",e.votes,Object(N.jsx)("button",{onClick:n,children:"vote"})]})]},e.id)},C=function(){var t=Object(u.c)(),e=Object(u.d)((function(t){return t.anecdotes})),n=Object(u.d)((function(t){return t.filter}));return e.map((function(e){return e.content.toLowerCase().includes(n.toLowerCase())?Object(N.jsx)(I,{anecdote:e,handleClick:function(){var n;t((n=e.id,function(){var t=Object(j.a)(p.a.mark((function t(e){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.update(n);case 2:r=t.sent,e({type:"VOTE",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),t(y("you voted for ".concat(e.content),3))}},e.key):Object(N.jsx)(N.Fragment,{})}))},A=Object(u.b)((function(t){return{notifications:t.notifications}}))((function(t){return t.notifications?Object(N.jsx)("div",{style:{border:"solid",padding:10,borderWidth:1},children:t.notifications}):null})),_=function(){var t=Object(u.c)();return Object(N.jsxs)("div",{style:{marginBottom:10},children:["filter ",Object(N.jsx)("input",{onChange:function(e){t({type:"SET_FILTER",data:{filter:e.target.value}})}})]})},D=function(){var t=Object(u.c)();return Object(c.useEffect)((function(){t(function(){var t=Object(j.a)(p.a.mark((function t(e){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.getAll();case 2:n=t.sent,e({type:"INIT_ANECDOTES",data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[t]),Object(N.jsxs)("div",{children:[Object(N.jsx)("h2",{children:"Anecdotes"}),Object(N.jsx)(A,{}),Object(N.jsx)(_,{}),Object(N.jsx)(C,{}),Object(N.jsx)(k,{})]})};o.a.render(Object(N.jsx)(u.a,{store:g,children:Object(N.jsx)(D,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.d23e11dd.chunk.js.map